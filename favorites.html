<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>விருப்பமான பெயர்கள் | தமிழ் பெயர்கள்</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="professional-additions.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>தமிழ் பெயர்கள்</h1>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">முகப்பு</a>
                <a href="names.html" class="nav-link">பெயர்கள்</a>
                <a href="submit.html" class="nav-link">பெயர் சேர்க்கவும்</a>
                <a href="favorites.html" class="nav-link active">விருப்பங்கள்</a>
                <a href="about.html" class="nav-link">பற்றி</a>
            </div>
            <div class="nav-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Favorites Section -->
    <main class="favorites-section">
        <div class="container">
            <div class="favorites-header">
                <h1 class="section-title">எனது விருப்பமான பெயர்கள்</h1>
                <p class="section-description">
                    நீங்கள் விரும்பும் பெயர்களின் தனிப்பட்ட தொகுப்பு. இவைகளை எளிதாக அணுகவும் பகிரவும் முடியும்.
                </p>
            </div>

            <div class="favorites-actions">
                <div class="action-buttons">
                    <button onclick="exportFavorites()" class="btn btn-secondary">
                        பட்டியலை தரவிறக்க
                    </button>
                    <button onclick="shareFavorites()" class="btn btn-accent">
                        பகிர்ந்து கொள்ளுங்கள்
                    </button>
                    <button onclick="clearAllFavorites()" class="btn btn-outline">
                        அனைத்தையும் அழிக்க
                    </button>
                </div>
                
                <div class="favorites-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="favoritesCount">0</span>
                        <span class="stat-label">விருப்பமான பெயர்கள்</span>
                    </div>
                </div>
            </div>

            <div id="favoritesContainer">
                <!-- Favorites will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <h2>பெயர்களை தரவிறக்க</h2>
                <p>உங்கள் விருப்பமான பெயர்களை பல்வேறு வடிவங்களில் தரவிறக்கம் செய்யுங்கள்</p>
            </div>
            <div class="export-options">
                <button onclick="downloadAsText()" class="btn btn-primary">
                    உரை கோப்பாக (.txt)
                </button>
                <button onclick="downloadAsJSON()" class="btn btn-secondary">
                    JSON கோப்பாக
                </button>
                <button onclick="printFavorites()" class="btn btn-accent">
                    அச்சிட
                </button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <h2>பெயர்களை பகிர்ந்து கொள்ளுங்கள்</h2>
                <p>உங்கள் விருப்பமான பெயர்களை மற்றவர்களுடன் பகிர்ந்து கொள்ளுங்கள்</p>
            </div>
            <div class="share-content">
                <textarea id="shareText" class="share-textarea" readonly></textarea>
                <div class="share-actions">
                    <button onclick="copyToClipboard()" class="btn btn-primary">
                        நகலெடுக்க
                    </button>
                    <button onclick="shareViaWhatsApp()" class="btn btn-accent">
                        WhatsApp மூலம் பகிர்க
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>தமிழ் பெயர்கள்</h3>
                    <p>தமிழ் பெயர்களின் பொக்கிஷம்</p>
                </div>
                <div class="footer-section">
                    <h4>இணைப்புகள்</h4>
                    <ul>
                        <li><a href="names.html">பெயர்கள்</a></li>
                        <li><a href="submit.html">பெயர் சேர்க்கவும்</a></li>
                        <li><a href="about.html">பற்றி</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>தொடர்பு</h4>
                    <p>உங்கள் கருத்துகள் மற்றும் பரிந்துரைகள் வரவேற்கப்படுகின்றன</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 தமிழ் பெயர்கள். அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.</p>
            </div>
        </div>
    </footer>

    <script src="api-client.js"></script>
    <script src="script.js"></script>

    <script>
        // Favorites page specific functions
        function exportFavorites() {
            const modal = document.getElementById('exportModal');
            modal.style.display = 'block';
        }

        function shareFavorites() {
            const favoriteNames = namesDatabase.filter(name => userFavorites.includes(name.id));
            
            if (favoriteNames.length === 0) {
                alert('பகிர உங்களிடம் விருப்பமான பெயர்கள் இல்லை');
                return;
            }

            const shareText = generateShareText(favoriteNames);
            document.getElementById('shareText').value = shareText;
            
            const modal = document.getElementById('shareModal');
            modal.style.display = 'block';
        }

        function generateShareText(names) {
            let text = "எனது விருப்பமான தமிழ் பெயர்கள்:\n\n";
            
            names.forEach((name, index) => {
                text += `${index + 1}. ${name.name}\n`;
                text += `   அர்த்தம்: ${name.meaning}\n`;
                if (name.reference) {
                    text += `   குறிப்பு: ${name.reference}\n`;
                }
                text += `   பாலினம்: ${name.gender}\n\n`;
            });
            
            text += "தமிழ் பெயர்கள் இணையதளத்திலிருந்து - https://tamil-peyargal.com";
            
            return text;
        }

        function clearAllFavorites() {
            if (confirm('அனைத்து விருப்பமான பெயர்களையும் அழிக்க விரும்புகிறீர்களா?')) {
                userFavorites = [];
                localStorage.setItem('tamilNamesFavorites', JSON.stringify(userFavorites));
                loadFavoriteNames();
                updateFavoritesCount();
            }
        }

        function downloadAsText() {
            const favoriteNames = namesDatabase.filter(name => userFavorites.includes(name.id));
            const content = generateShareText(favoriteNames);
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tamil-names-favorites.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            document.getElementById('exportModal').style.display = 'none';
        }

        function downloadAsJSON() {
            const favoriteNames = namesDatabase.filter(name => userFavorites.includes(name.id));
            const content = JSON.stringify(favoriteNames, null, 2);
            
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tamil-names-favorites.json';
            a.click();
            URL.revokeObjectURL(url);
            
            document.getElementById('exportModal').style.display = 'none';
        }

        function printFavorites() {
            const favoriteNames = namesDatabase.filter(name => userFavorites.includes(name.id));
            const content = generatePrintContent(favoriteNames);
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(content);
            printWindow.document.close();
            printWindow.print();
            
            document.getElementById('exportModal').style.display = 'none';
        }

        function generatePrintContent(names) {
            return `
                <!DOCTYPE html>
                <html lang="ta">
                <head>
                    <meta charset="UTF-8">
                    <title>எனது விருப்பமான தமிழ் பெயர்கள்</title>
                    <style>
                        body { font-family: 'Noto Sans Tamil', sans-serif; line-height: 1.6; margin: 2rem; }
                        h1 { color: #d32f2f; text-align: center; }
                        .name-item { margin-bottom: 2rem; page-break-inside: avoid; }
                        .name-title { font-size: 1.5rem; font-weight: bold; color: #d32f2f; }
                        .name-detail { margin-left: 1rem; margin-bottom: 0.5rem; }
                        @media print { body { margin: 1rem; } }
                    </style>
                </head>
                <body>
                    <h1>எனது விருப்பமான தமிழ் பெயர்கள்</h1>
                    ${names.map((name, index) => `
                        <div class="name-item">
                            <div class="name-title">${index + 1}. ${name.name}</div>
                            <div class="name-detail"><strong>அர்த்தம்:</strong> ${name.meaning}</div>
                            ${name.reference ? `<div class="name-detail"><strong>குறிப்பு:</strong> ${name.reference}</div>` : ''}
                            <div class="name-detail"><strong>பாலினம்:</strong> ${name.gender}</div>
                        </div>
                    `).join('')}
                </body>
                </html>
            `;
        }

        function copyToClipboard() {
            const shareText = document.getElementById('shareText');
            shareText.select();
            shareText.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            // Show feedback
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> நகலெடுக்கப்பட்டது!';
            btn.style.background = '#4caf50';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = '';
            }, 2000);
        }

        function shareViaWhatsApp() {
            const shareText = document.getElementById('shareText').value;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
            window.open(whatsappUrl, '_blank');
        }

        function updateFavoritesCount() {
            const countEl = document.getElementById('favoritesCount');
            if (countEl) {
                countEl.textContent = userFavorites.length;
            }
        }

        // Initialize favorites count on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateFavoritesCount();
            
            // Setup modal close events
            const modals = document.querySelectorAll('.modal');
            const closeButtons = document.querySelectorAll('.close');
            
            closeButtons.forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    modal.style.display = 'none';
                });
            });
            
            window.addEventListener('click', function(event) {
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });
        });
    </script>

    <style>
        .favorites-section {
            margin-top: 70px;
            padding: 4rem 0;
            background: linear-gradient(135deg, #f9f9f9 0%, #fff5f5 100%);
            min-height: 100vh;
        }

        .favorites-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .favorites-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .favorites-stats {
            text-align: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #d32f2f;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            color: #d32f2f;
            margin-bottom: 1rem;
        }

        .modal-header p {
            color: #666;
            line-height: 1.6;
        }

        .export-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .share-textarea {
            width: 100%;
            height: 200px;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-family: 'Noto Sans Tamil', sans-serif;
            resize: vertical;
            margin-bottom: 1rem;
        }

        .share-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .favorites-actions {
                flex-direction: column;
                gap: 2rem;
                text-align: center;
            }

            .action-buttons {
                justify-content: center;
            }

            .share-actions {
                flex-direction: column;
            }

            .export-options {
                gap: 0.5rem;
            }
        }
    </style>
</body>
</html>
